
[{"content":"","date":"26 July 2025","externalUrl":null,"permalink":"/","section":"","summary":"","title":"","type":"page"},{"content":"","date":"26 July 2025","externalUrl":null,"permalink":"/administration/","section":"","summary":"","title":"","type":"administration"},{"content":"","date":"26 July 2025","externalUrl":null,"permalink":"/tags/linux/","section":"Tags","summary":"","title":"Linux","type":"tags"},{"content":"","date":"26 July 2025","externalUrl":null,"permalink":"/tags/security/","section":"Tags","summary":"","title":"Security","type":"tags"},{"content":"","date":"26 July 2025","externalUrl":null,"permalink":"/tags/ssh/","section":"Tags","summary":"","title":"SSH","type":"tags"},{"content":"A collection of guides and scripts for securing and managing SSH configurations, keys, and connections.\nüîê 1. Secure Root Login with Key-Only Authentication # Purpose:\nEnhances server security by disabling password-based authentication for the root user. Modifies the SSH daemon configuration (sshd_config) to permit root login only via public key authentication. This protects your server from brute-force password attacks.\n‚ö†Ô∏è Important Prerequisite:\nYou MUST have SSH key-based authentication configured and tested for root access before applying this script.\nInstallation and Usage # nano ssh_key_only.sh # Create the script chmod +x ssh_key_only.sh # Make it executable sudo ./ssh_key_only.sh # Run as root Script # #!/bin/bash SSHD_CONFIG=\u0026#34;/etc/ssh/sshd_config\u0026#34; BACKUP_DIR=\u0026#34;/etc/ssh/backups\u0026#34; TIMESTAMP=$(date +\u0026#34;%Y-%m-%d_%H-%M-%S\u0026#34;) BACKUP_FILE=\u0026#34;$BACKUP_DIR/sshd_config_backup_$TIMESTAMP\u0026#34; error_exit() { echo \u0026#34;Error: $1\u0026#34; \u0026gt;\u0026amp;2 exit 1 } if [[ $EUID -ne 0 ]]; then error_exit \u0026#34;This script must be run as root.\u0026#34; fi echo \u0026#34;Creating a backup...\u0026#34; mkdir -p \u0026#34;$BACKUP_DIR\u0026#34; || error_exit \u0026#34;Could not create backup directory.\u0026#34; cp \u0026#34;$SSHD_CONFIG\u0026#34; \u0026#34;$BACKUP_FILE\u0026#34; || error_exit \u0026#34;Could not create backup file.\u0026#34; echo \u0026#34;Backup created at $BACKUP_FILE\u0026#34; echo \u0026#34;Updating sshd_config...\u0026#34; if grep -qE \u0026#34;^\\s*#?\\s*PermitRootLogin\u0026#34; \u0026#34;$SSHD_CONFIG\u0026#34;; then sed -i.bak -E \u0026#34;s/^\\s*#?\\s*PermitRootLogin.*/PermitRootLogin prohibit-password/\u0026#34; \u0026#34;$SSHD_CONFIG\u0026#34; else echo \u0026#34;PermitRootLogin prohibit-password\u0026#34; \u0026gt;\u0026gt; \u0026#34;$SSHD_CONFIG\u0026#34; fi if grep -q \u0026#34;PermitRootLogin prohibit-password\u0026#34; \u0026#34;$SSHD_CONFIG\u0026#34;; then echo \u0026#34;PermitRootLogin updated.\u0026#34; else error_exit \u0026#34;Failed to update setting. Restoring from backup.\u0026#34; cp \u0026#34;$BACKUP_FILE\u0026#34; \u0026#34;$SSHD_CONFIG\u0026#34; fi echo \u0026#34;Restarting SSH service...\u0026#34; if [ -d /run/systemd/system ]; then systemctl restart sshd || error_exit \u0026#34;Failed to restart sshd via systemctl.\u0026#34; else service ssh restart || /etc/init.d/sshd restart || error_exit \u0026#34;Failed to restart sshd.\u0026#34; fi echo \u0026#34;‚úîÔ∏è SSH configured successfully. Root login now requires keys only.\u0026#34; üë§ 2. Copying an SSH Key from Root to a New User # ‚úÖ Scenario 1: New User Has sudo Access # mkdir -p /home/$USER/.ssh chmod 700 /home/$USER/.ssh sudo cp /root/.ssh/authorized_keys /home/$USER/.ssh/authorized_keys sudo chown -R $USER:$USER /home/$USER/.ssh sudo chmod 600 /home/$USER/.ssh/authorized_keys üõë Scenario 2: New User Has NO sudo Access # NEW_USER=\u0026#34;\u0026lt;your_username\u0026gt;\u0026#34; mkdir -p /home/$NEW_USER/.ssh chmod 700 /home/$NEW_USER/.ssh cp /root/.ssh/authorized_keys /home/$NEW_USER/.ssh/authorized_keys chown -R $NEW_USER:$NEW_USER /home/$NEW_USER/.ssh chmod 600 /home/$NEW_USER/.ssh/authorized_keys üß± 3. Create a Secure, Key-Only Sudo User # Run all commands as the root user.\n1. Create User and Grant Sudo Access # adduser \u0026lt;newuser\u0026gt; usermod -aG sudo \u0026lt;newuser\u0026gt; # Debian/Ubuntu systems 2. Set Up SSH Key Auth from Root # NEWUSER=\u0026#34;\u0026lt;newuser\u0026gt;\u0026#34; mkdir -p /home/$NEWUSER/.ssh cp /root/.ssh/authorized_keys /home/$NEWUSER/.ssh/authorized_keys chown -R $NEWUSER:$NEWUSER /home/$NEWUSER/.ssh chmod 700 /home/$NEWUSER/.ssh chmod 600 /home/$NEWUSER/.ssh/authorized_keys 3. Enable Passwordless sudo # echo \u0026#34;$NEWUSER ALL=(ALL) NOPASSWD:ALL\u0026#34; \u0026gt; /etc/sudoers.d/01-$NEWUSER-nopasswd chmod 440 /etc/sudoers.d/01-$NEWUSER-nopasswd 4. Harden SSH Configuration # Edit /etc/ssh/sshd_config:\nPermitRootLogin no PasswordAuthentication no Ensure:\nPubkeyAuthentication yes Restart the SSH daemon:\nsystemctl restart sshd Test with:\nssh \u0026lt;newuser\u0026gt;@your_server_ip sudo whoami üíª 4. Transferring an SSH Key from Windows 11 to Ubuntu # Requirements # Windows 11 with OpenSSH installed Key pair generated using ssh-keygen Steps # # From Windows PowerShell scp C:\\Users\\\u0026lt;YourWindowsUser\u0026gt;\\.ssh\\id_rsa.pub \u0026lt;ubuntu_user\u0026gt;@\u0026lt;server_ip\u0026gt;:~/ # Then log into Ubuntu and run: ssh \u0026lt;ubuntu_user\u0026gt;@\u0026lt;server_ip\u0026gt; mkdir -p ~/.ssh cat ~/id_rsa.pub \u0026gt;\u0026gt; ~/.ssh/authorized_keys chmod 700 ~/.ssh chmod 600 ~/.ssh/authorized_keys rm ~/id_rsa.pub üßπ 5. Utility to Clean known_hosts File # Use this script to remove malformed lines from ~/.ssh/known_hosts.\nScript # #!/bin/bash KNOWN_HOSTS_FILE=\u0026#34;$HOME/.ssh/known_hosts\u0026#34; BACKUP_FILE=\u0026#34;$KNOWN_HOSTS_FILE.bak\u0026#34; echo \u0026#34;[*] Backing up known_hosts to $BACKUP_FILE\u0026#34; cp \u0026#34;$KNOWN_HOSTS_FILE\u0026#34; \u0026#34;$BACKUP_FILE\u0026#34; echo \u0026#34;[*] Removing malformed lines...\u0026#34; awk \u0026#39;NF \u0026gt;= 3\u0026#39; \u0026#34;$BACKUP_FILE\u0026#34; \u0026gt; \u0026#34;$KNOWN_HOSTS_FILE\u0026#34; echo \u0026#34;[+] Cleaned known_hosts written.\u0026#34; echo \u0026#34;[!] Original backed up as $BACKUP_FILE\u0026#34; For maximum security and reliability, remember to test each change before closing your root session, especially after altering SSH configurations.\n","date":"26 July 2025","externalUrl":null,"permalink":"/administration/ssh-management-utilities/","section":"","summary":"Guides and scripts for securing and managing SSH configurations, keys, and connections.","title":"SSH Management Utilities","type":"administration"},{"content":"","date":"26 July 2025","externalUrl":null,"permalink":"/tags/","section":"Tags","summary":"","title":"Tags","type":"tags"},{"content":"","date":"26 July 2025","externalUrl":null,"permalink":"/tags/utilities/","section":"Tags","summary":"","title":"Utilities","type":"tags"},{"content":"","date":"26 July 2025","externalUrl":null,"permalink":"/tags/windows/","section":"Tags","summary":"","title":"Windows","type":"tags"},{"content":"","date":"25 July 2025","externalUrl":null,"permalink":"/categories/about/","section":"Categories","summary":"","title":"About","type":"categories"},{"content":"","date":"25 July 2025","externalUrl":null,"permalink":"/tags/about/","section":"Tags","summary":"","title":"About","type":"tags"},{"content":"With over 20 years in the technology space, I bridge the critical gap between data analytics and the underlying IT infrastructure. My passion is transforming complex datasets into clear, actionable insights that drive business growth. But unlike many analysts, my perspective is built from the ground up‚Äîliterally from the server racks to the board room.\nMy journey began in operations and systems management, where I learned firsthand that technology\u0026rsquo;s true value lies in solving tangible business problems. I managed complex inventory systems for Disney vendors, oversaw IT for defense contractors, and honed my skills by implementing workflow improvements that boosted profitability by 10%. This experience taught me to think about business needs first.\nüíº What I Do Today # Today, I channel that foundation into my work as a Data and Systems Analyst, specializing in:\nüîπ Data Analysis \u0026amp; Visualization\nUsing SQL, Tableau, and Grafana to dive deep into data, uncover hidden trends, and build intuitive dashboards that empower leaders to make informed decisions.\nüîπ System \u0026amp; Workflow Automation\nLeveraging Microsoft Power Automate, SharePoint, and n8n to eliminate manual processes, enhance operational efficiency, and build scalable, automated systems.\nüîπ Full-Stack Infrastructure Management\nDrawing on extensive experience with Windows/Linux servers, Proxmox/Hyper-V virtualization, and Docker/Kubernetes containerization to build and maintain reliable, high-performance environments that data-driven organizations depend on.\nüîπ Networking \u0026amp; Security\nImplementing robust security postures using technologies like pfSense, Cisco Meraki, and Cloudflare to protect critical data assets.\nüîß My Mindset # I am a dedicated continuous learner, always exploring emerging technologies like AI and open-source tools to find new ways to solve challenges. I thrive on untangling complex problems and building solutions that are not only elegant and efficient but also deliver measurable business value.\n","date":"25 July 2025","externalUrl":null,"permalink":"/about/","section":"","summary":"","title":"About Me","type":"page"},{"content":"","date":"25 July 2025","externalUrl":null,"permalink":"/categories/","section":"Categories","summary":"","title":"Categories","type":"categories"},{"content":"","externalUrl":null,"permalink":"/projects/","section":"","summary":"","title":"","type":"projects"},{"content":"","externalUrl":null,"permalink":"/random/","section":"","summary":"","title":"","type":"random"},{"content":"","externalUrl":null,"permalink":"/authors/","section":"Authors","summary":"","title":"Authors","type":"authors"},{"content":"","externalUrl":null,"permalink":"/series/","section":"Series","summary":"","title":"Series","type":"series"}]